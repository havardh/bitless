\chapter{FPGA Processor VHDL implementation}
\section{VHDL Code}

\clearpage
\subsection{Toplevel}\label{vhdl:toplevel}
\lstinputlisting[language=VHDL]{../vhdl/toplevel.vhd}

\clearpage
\subsection{Clock Controller}\label{vhdl:clkcntrl}
\lstinputlisting[language=VHDL]{../vhdl/clock_controller.vhd}

\clearpage
\subsection{Pipeline}\label{vhdl:pipeline}
\lstinputlisting[language=VHDL]{../vhdl/pipeline/pipeline.vhd}

\clearpage
\subsection{Internal Bus}\label{vhdl:internal-bus}
\lstinputlisting[language=VHDL]{../vhdl/ebi/internal_bus.vhd}

\clearpage
\subsection{EBI Controller}\label{vhdl:ebi-controller}
\lstinputlisting[language=VHDL]{../vhdl/ebi/ebi_controller.vhd}

\clearpage
\subsection{Ringbuffer}\label{vhdl:ringbuffer}
\lstinputlisting[language=VHDL]{../vhdl/pipeline/ringbuffer.vhd}

\clearpage
\subsection{Instruction Memory}\label{vhdl:instruction-memory}
\lstinputlisting[language=VHDL]{../vhdl/toplevel.vhd}

\clearpage
\subsection{Constant Memory}\label{vhdl:constant-memory}
\lstinputlisting[language=VHDL]{../vhdl/pipeline/constant_memory.vhd}

\clearpage
\subsection{Processor Core}\label{vhdl:core}
\lstinputlisting[language=VHDL]{../vhdl/pipeline/core/core.vhd}

\clearpage
\subsection{Control Unit}\label{vhdl:control-unit}
\lstinputlisting[language=VHDL]{../vhdl/pipeline/core/control_unit.vhd}

\clearpage
\subsection{Register File}\label{vhdl:register-file}
\lstinputlisting[language=VHDL]{../vhdl/pipeline/core/register_file.vhd}

\clearpage
\subsection{ALU}\label{vhdl:alu}
\lstinputlisting[language=VHDL]{../vhdl/pipeline/core/alu/alu.vhd}

\clearpage
\subsection{Memory Forwarding Unit}\label{vhdl:forwarding-unit-mem}
\lstinputlisting[language=VHDL]{../vhdl/pipeline/core/forwarding_unit.vhd}

\clearpage
\subsection{Execution Forwarding Unit}\label{vhdl:forwarding-unit-exec}
\lstinputlisting[language=VHDL]{../vhdl/pipeline/core/forwarding_unit_ex.vhd}


%	Stopped for now due to KS complaints of this not belonging in an appendix


\clearpage
\section{VHDL Testbenches}

\clearpage
\subsection{Toplevel Testbench}\label{vhdl:tb-toplevel}
\lstinputlisting[language=VHDL]{../vhdl/testbenches/tb_toplevel.vhd}

\clearpage
\subsection{EBI Controller Testbench}\label{vhdl:tb-ebi-controller}
\lstinputlisting[language=VHDL]{../vhdl/testbenches/tb_ebi_controller.vhd}

\clearpage
\subsection{Ringbuffer Testbench}\label{vhdl:tb-ringbuffer}
\lstinputlisting[language=VHDL]{../vhdl/testbenches/tb_ringbuffer.vhd}

\clearpage
\subsection{Core testbench}\label{vhdl:tb-core}
\lstinputlisting[language=VHDL]{../vhdl/testbenches/tb_core.vhd}
\lstinputlisting[language=VHDL]{../vhdl/testbenches/tb_processor_core_magnus.vhd}

\clearpage
\subsection{ALU Testbench}\label{vhdl:tb-alu}
\lstinputlisting[language=VHDL]{../vhdl/testbenches/tb_alu.vhd}

\clearpage
\subsection{Regiser File Testbench}\label{vhdl:tb-register-file}
\lstinputlisting[language=VHDL]{../vhdl/testbenches/tb_register_file.vhd}
