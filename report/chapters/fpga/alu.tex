\FloatBarrier
\section{ALU}\label{sec:fpga-alu}

Which operations were implemented in the ALU was desided based on what
was neccessary for the fourier transform and sound processing and on
whether the instruction set had room for the encoding of the operations.

Division was not implemented in hardware in order for all instructions to be
single-cycle. However, division can be done using floating point multiplication
or by a regular long division algorithm in software.

%\FloatBarrier
%\subsubsection{Fourier-transforms}\label{subsubsection:fpga-alu-ft}
%\todo[inline]{Need a way to refer to this subsubsection. I tried refering to it
%in the design.tex file. The resulting reference refers to the ALU subsection as
%a whole, and not the FT subsection.}
%
%It did not take long before it became evident that there were two types of FT's
%standing out from the rest of when considering FT's for the purpose of real-time
%sound processing. Namely the Integer- and Sliding-Discrete- Fourier-Transforms.
%The Integer-FT was ideal when considering that we would not have to implement
%support for floating-point operations.
%
%However, the Integer-FT needed the whole music file when transforming. It could
%not transform discrete samples one at the time, which we would need if we had a
%live source as input (say a portable music device connected to the PCB's
%minijack). Also, we were unable to find any pseudo-code describing how such a
%transform would function. The few examples we found described only the
%mathematical functions, which left too huge a gap for us to research on our own.
%
%Having found this out, the Sliding-Discrete-FTs potential use for our purposes
%rose substantially. Not only would it allow us to perform a real-time
%Fourier-transform, but we also managed to find pseudo-code describing how such a
%transform would function. The big downside to the SD-FT however was the
%necessity of floating-point to accomplish the implementation.
%
%\FloatBarrier
%\subsubsection{ALU input size}\todo{Better subsubsection title?}
%
%Due to the algorithmically heavy operations of the SD-FT being the
%\emph{heaviest} algorithmic operation performed in the the processor as a whole,
%looking into how we could optimize the algorithm became a focus in the VHDL
%group. Using the application \todo{Need references to actual (and correct!)
%application notes here!}notes to find out the potential best speeds (read:
%frequencies) of the FPGA, we then started calculating how fast the SD-FT would
%have to perform its transform per sample.
%
%It quickly became apparent that a ``quick and easy'' way to drastically reduce
%the time complexity the algorithm would need to transform each sample, was to
%reduce the sample sizes. \todo[inline]{Find some reference, or picture, or add a
%paragraph explaining said algorithm.}With this in mind, we started testing how
%small samples we could have, and yet have a passable level of sound quality. The
%final result we ended up on was to have eight-bit datasamples. This had the
%consequence of reducing the maximum sound frequency from ca. 44 kilohertz down
%to \todo{This needs to be confirmed/edited.}11.
%
